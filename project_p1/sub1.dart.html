<html>
<head>
<title>sub1.dart</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #080808;}
.s1 { color: #067d17;}
.s2 { color: #0033b3;}
.s3 { color: #8c8c8c; font-style: italic;}
.s4 { color: #1750eb;}
</style>
</head>
<body bgcolor="#ffffff">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#c0c0c0" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
sub1.dart</font>
</center></td></tr></table>
<pre><span class="s0">import </span><span class="s1">'dart:math' </span><span class="s0">as math;</span>

<span class="s0">import </span><span class="s1">'package:flutter/material.dart'</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">'package:project_p1/SearchPage.dart'</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">'package:project_p1/ShowLayer.dart'</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">'package:project_p1/main.dart'</span><span class="s0">;</span>

<span class="s2">class </span><span class="s0">SubPage </span><span class="s2">extends </span><span class="s0">StatefulWidget {</span>
  <span class="s2">final </span><span class="s0">Widget child;</span>

  <span class="s2">const </span><span class="s0">SubPage({Key key, </span><span class="s2">this</span><span class="s0">.child}) : </span><span class="s2">super</span><span class="s0">(key: key);</span>

  <span class="s0">static SubPageState of(BuildContext context) =&gt;</span>
      <span class="s0">context.findAncestorStateOfType&lt;SubPageState&gt;();</span>

  <span class="s0">@override</span>
  <span class="s0">SubPageState createState() =&gt; </span><span class="s2">new </span><span class="s0">SubPageState();</span>
<span class="s0">}</span>

<span class="s2">class </span><span class="s0">SubPageState </span><span class="s2">extends </span><span class="s0">State&lt;SubPage&gt;</span>
    <span class="s2">with </span><span class="s0">SingleTickerProviderStateMixin {</span>
  <span class="s0">AnimationController animationController;</span>
  <span class="s3">//AnimationController ani;</span>
  <span class="s0">bool _canBeDragged = </span><span class="s2">false</span><span class="s0">;</span>

  <span class="s0">double drag = </span><span class="s4">0.0</span><span class="s0">;</span>
  <span class="s0">int mainPage = </span><span class="s4">1</span><span class="s0">;</span>
  <span class="s0">int k = </span><span class="s4">0</span><span class="s0">;</span>
  <span class="s0">@override</span>
  <span class="s2">void </span><span class="s0">initState() {</span>
    <span class="s2">super</span><span class="s0">.initState();</span>
    <span class="s0">animationController = AnimationController(</span>
      <span class="s0">vsync: </span><span class="s2">this</span><span class="s0">,</span>
      <span class="s0">duration: Duration(milliseconds: </span><span class="s4">250</span><span class="s0">),</span>
    <span class="s0">);</span>
  <span class="s0">}</span>

  <span class="s0">@override</span>
  <span class="s2">void </span><span class="s0">dispose() {</span>
    <span class="s0">animationController.dispose();</span>
    <span class="s2">super</span><span class="s0">.dispose();</span>
  <span class="s0">}</span>

  <span class="s2">void </span><span class="s0">toggle() =&gt; animationController.isDismissed</span>
      <span class="s0">? animationController.forward()</span>
      <span class="s0">: animationController.reverse();</span>

  <span class="s0">@override</span>
  <span class="s0">Widget build(BuildContext context) {</span>
    <span class="s2">final </span><span class="s0">double maxSlide = MediaQuery.of(context).size.width / </span><span class="s4">2</span><span class="s0">;</span>
    <span class="s2">return </span><span class="s0">GestureDetector(</span>
      <span class="s0">onHorizontalDragStart: _onDragStart,</span>
      <span class="s0">onHorizontalDragUpdate: _onDragUpdate,</span>
      <span class="s0">onHorizontalDragEnd: _onDragEnd,</span>
      <span class="s0">behavior: HitTestBehavior.translucent,</span>
      <span class="s3">//onTap: toggle,</span>
      <span class="s0">child: AnimatedBuilder(</span>
        <span class="s0">animation: animationController,</span>
        <span class="s0">builder: (context, _) {</span>
          <span class="s2">return </span><span class="s0">Material(</span>
            <span class="s0">color: Colors.black12,</span>
            <span class="s0">child: Stack(</span>
              <span class="s0">children: &lt;Widget&gt;[</span>

                <span class="s0">Transform.translate(</span>
                  <span class="s0">offset: Offset(MediaQuery.of(context).size.width/</span><span class="s4">2</span><span class="s0">, </span><span class="s4">0</span><span class="s0">),</span>
                  <span class="s0">child: Transform(</span>
                    <span class="s0">transform: Matrix4.identity()</span>
                      <span class="s0">..setEntry(</span><span class="s4">2</span><span class="s0">, </span><span class="s4">2</span><span class="s0">, </span><span class="s4">0.001</span><span class="s0">)</span>
                      <span class="s0">..rotateY(math.pi / </span><span class="s4">2 </span><span class="s0">* (</span><span class="s4">1 </span><span class="s0">- animationController.value)),</span>
                    <span class="s0">alignment: Alignment.centerRight,</span>
                    <span class="s0">child: MyDrawer1(),</span>
                  <span class="s0">),</span>
                <span class="s0">),</span>
                <span class="s0">Transform.translate(</span>
                  <span class="s0">offset: Offset(maxSlide * (animationController.value - </span><span class="s4">1</span><span class="s0">), </span><span class="s4">0</span><span class="s0">),</span>
                  <span class="s0">child: Transform(</span>
                    <span class="s0">transform: Matrix4.identity()</span>
                      <span class="s0">..setEntry(</span><span class="s4">2</span><span class="s0">, </span><span class="s4">2</span><span class="s0">, </span><span class="s4">0.001</span><span class="s0">)</span>
                      <span class="s0">..rotateY(math.pi / </span><span class="s4">2 </span><span class="s0">* (</span><span class="s4">1 </span><span class="s0">- animationController.value)),</span>
                    <span class="s0">alignment: Alignment.centerRight,</span>
                    <span class="s0">child: MyDrawer(),</span>
                  <span class="s0">),</span>
                <span class="s0">),</span>
                <span class="s0">Transform.translate(</span>
                  <span class="s0">offset: Offset(maxSlide * animationController.value, </span><span class="s4">0</span><span class="s0">),</span>
                  <span class="s0">child: Transform(</span>
                    <span class="s0">transform: Matrix4.identity()</span>
                      <span class="s0">..setEntry(</span><span class="s4">3</span><span class="s0">, </span><span class="s4">2</span><span class="s0">, </span><span class="s4">0.001</span><span class="s0">)</span>
                      <span class="s0">..rotateY(-math.pi * animationController.value/ </span><span class="s4">2</span><span class="s0">),</span>
                    <span class="s0">alignment: Alignment.centerLeft,</span>
                    <span class="s0">child: widget.child,</span>
                  <span class="s0">),</span>
                <span class="s0">),</span>



                <span class="s3">/* 
                Positioned( 
                  top: 16.0 + MediaQuery.of(context).padding.top, 
                  left: animationController.value * 
                      MediaQuery.of(context).size.width, 
                  width: MediaQuery.of(context).size.width, 
                  child: Text( 
                    'Hello Flutter Europe', 
                    style: Theme.of(context).primaryTextTheme.title, 
                    textAlign: TextAlign.center, 
                  ), 
                ),*/</span>
              <span class="s0">],</span>
            <span class="s0">),</span>
          <span class="s0">);</span>
        <span class="s0">},</span>
      <span class="s0">),</span>
    <span class="s0">);</span>
  <span class="s0">}</span>

  <span class="s2">void </span><span class="s0">_onDragStart(DragStartDetails details) {</span>
    <span class="s0">bool isDragOpenFromLeft = animationController.isDismissed;</span>
    <span class="s0">bool isDragCloseFromRight = animationController.isCompleted;</span>
    <span class="s0">_canBeDragged = isDragOpenFromLeft || isDragCloseFromRight;</span>
    <span class="s0">print(animationController.value);</span>
    <span class="s0">_canBeDragged = </span><span class="s2">true</span><span class="s0">;</span>
    <span class="s0">drag = </span><span class="s4">0.0</span><span class="s0">;</span>
  <span class="s0">}</span>

  <span class="s2">void </span><span class="s0">_onDragUpdate(DragUpdateDetails details) {</span>
    <span class="s2">if </span><span class="s0">(_canBeDragged) {</span>
      <span class="s0">double delta = details.primaryDelta / (MediaQuery.of(context).size.width / </span><span class="s4">2</span><span class="s0">);</span>
      <span class="s0">animationController.value += delta;</span>
<span class="s3">/* 
      drag += details.delta.dx / (MediaQuery.of(context).size.width / 2); 
      if ((drag &gt; 0) || (mainPage == 0)) 
        { 
          //print(delta); 
          animationController.value += delta; 
          k = 1; 
        } 
      else if((drag &lt; 0) || (mainPage == 1)) 
        { 
          //print(delta); 
          animationController.value -= delta; 
          k = -1; 
        }*/</span>
    <span class="s0">}</span>

  <span class="s0">}</span>

  <span class="s2">void </span><span class="s0">_onDragEnd(DragEndDetails details) {</span>
    <span class="s3">//I have no idea what it means, copied from Drawer</span>
    <span class="s0">double _kMinFlingVelocity = </span><span class="s4">365.0</span><span class="s0">;</span>
    <span class="s0">drag = </span><span class="s4">0.0</span><span class="s0">;</span>
    <span class="s2">if </span><span class="s0">(animationController.isDismissed || animationController.isCompleted) {</span>

      <span class="s2">return</span><span class="s0">;</span>
    <span class="s0">}</span>

    <span class="s2">if </span><span class="s0">(details.velocity.pixelsPerSecond.dx.abs() &gt;= _kMinFlingVelocity) {</span>
      <span class="s0">double visualVelocity = details.velocity.pixelsPerSecond.dx /</span>
          <span class="s0">MediaQuery.of(context).size.width;</span>

      <span class="s0">animationController.fling(velocity: visualVelocity);</span>
      <span class="s2">if</span><span class="s0">(mainPage==</span><span class="s4">0</span><span class="s0">)</span>
        <span class="s0">{</span>
          <span class="s0">mainPage = </span><span class="s4">1</span><span class="s0">;</span>
        <span class="s0">}</span>
      <span class="s2">else</span>
        <span class="s0">{</span>
          <span class="s0">mainPage = </span><span class="s4">0</span><span class="s0">;</span>
        <span class="s0">}</span>
    <span class="s0">} </span><span class="s2">else if </span><span class="s0">(animationController.value &lt; </span><span class="s4">0.5</span><span class="s0">) {</span>
      <span class="s0">animationController.reverse();</span>
      <span class="s0">mainPage = </span><span class="s4">1</span><span class="s0">;</span>
      <span class="s0">print(mainPage);</span>
    <span class="s0">} </span><span class="s2">else </span><span class="s0">{</span>
      <span class="s0">animationController.forward();</span>
      <span class="s0">mainPage = </span><span class="s4">0</span><span class="s0">;</span>
      <span class="s0">print(mainPage);</span>
    <span class="s0">}</span>

  <span class="s0">}</span>
<span class="s0">}</span>

<span class="s2">class </span><span class="s0">MyDrawer </span><span class="s2">extends </span><span class="s0">StatelessWidget {</span>
  <span class="s0">@override</span>
  <span class="s0">Widget build(BuildContext context) {</span>
    <span class="s2">return </span><span class="s0">SizedBox(</span>
      <span class="s0">width: MediaQuery.of(context).size.width/</span><span class="s4">2</span><span class="s0">,</span>
      <span class="s0">height: double.infinity,</span>
      <span class="s0">child: Material(</span>
        <span class="s0">color: Colors.teal[</span><span class="s4">100</span><span class="s0">],</span>
        <span class="s0">child: SafeArea(</span>
          <span class="s0">child: Theme(</span>
            <span class="s0">data: ThemeData(brightness: Brightness.dark),</span>
            <span class="s0">child: Column(</span>
              <span class="s0">crossAxisAlignment: CrossAxisAlignment.start,</span>
              <span class="s0">mainAxisSize: MainAxisSize.max,</span>
              <span class="s0">children: [</span>
                <span class="s0">SizedBox(</span>
                  <span class="s0">height: MediaQuery.of(context).size.height/</span><span class="s4">5</span><span class="s0">,</span>
                <span class="s0">),</span>
                <span class="s0">SizedBox(</span>
                  <span class="s0">height: MediaQuery.of(context).size.height/</span><span class="s4">9</span><span class="s0">,</span>
                  <span class="s0">child:</span>
                  <span class="s0">ListTile(</span>
                    <span class="s0">leading: Icon(Icons.forward),</span>
                    <span class="s0">title: Text(</span><span class="s1">'Printer'</span><span class="s0">,</span>
                      <span class="s0">style: TextStyle(</span>
                        <span class="s0">fontSize: </span><span class="s4">19.0</span><span class="s0">,</span>
                        <span class="s0">color: Colors.white,</span>
                      <span class="s0">),),</span>
                    <span class="s0">onTap: ()</span>
                    <span class="s0">{</span>
                      <span class="s0">Navigator.push(context, MaterialPageRoute(builder: (context){</span>
                        <span class="s3">//return SearchPage();</span>
                        <span class="s2">return </span><span class="s0">MyApp1();</span>
                      <span class="s0">}));</span>
                    <span class="s0">},</span>

                  <span class="s0">),</span>
                <span class="s0">),</span>
                <span class="s0">SizedBox(</span>
                  <span class="s0">height: MediaQuery.of(context).size.height/</span><span class="s4">9</span><span class="s0">,</span>
                  <span class="s0">child:</span>
                  <span class="s0">ListTile(</span>
                    <span class="s0">leading: Icon(Icons.forward),</span>
                    <span class="s0">title: Text(</span><span class="s1">'Computer'</span><span class="s0">,</span>
                      <span class="s0">style: TextStyle(</span>
                        <span class="s0">fontSize: </span><span class="s4">19.0</span><span class="s0">,</span>
                        <span class="s0">color: Colors.white,</span>
                      <span class="s0">),),</span>
                    <span class="s0">onTap: ()</span>
                    <span class="s0">{</span>
                      <span class="s0">Navigator.push(context, MaterialPageRoute(builder: (context){</span>
                        <span class="s3">//return SearchPage();</span>
                        <span class="s2">return </span><span class="s0">MyApp1();</span>
                      <span class="s0">}));</span>
                    <span class="s0">},</span>

                  <span class="s0">),</span>
                <span class="s0">),</span>
                <span class="s0">SizedBox(</span>
                  <span class="s0">height: MediaQuery.of(context).size.height/</span><span class="s4">9</span><span class="s0">,</span>
                  <span class="s0">child:</span>
                  <span class="s0">ListTile(</span>
                    <span class="s0">leading: Icon(Icons.forward),</span>
                    <span class="s0">title: Text(</span><span class="s1">'Vender'</span><span class="s0">,</span>
                      <span class="s0">style: TextStyle(</span>
                        <span class="s0">fontSize: </span><span class="s4">19.0</span><span class="s0">,</span>
                        <span class="s0">color: Colors.white,</span>
                      <span class="s0">),),</span>
                    <span class="s0">onTap: ()</span>
                    <span class="s0">{</span>
                      <span class="s0">Navigator.push(context, MaterialPageRoute(builder: (context){</span>
                        <span class="s3">//return SearchPage();</span>
                        <span class="s2">return </span><span class="s0">MyApp1();</span>
                      <span class="s0">}));</span>
                    <span class="s0">},</span>

                  <span class="s0">),</span>
                <span class="s0">),</span>

                <span class="s0">SizedBox(</span>
                  <span class="s0">height: MediaQuery.of(context).size.height/</span><span class="s4">9</span><span class="s0">,</span>
                  <span class="s0">child: ListTile(</span>
                    <span class="s0">leading: Icon(Icons.forward),</span>
                    <span class="s0">title: Text(</span><span class="s1">'Water Dispenser'</span><span class="s0">,</span>
                      <span class="s0">style: TextStyle(</span>
                        <span class="s0">fontSize: </span><span class="s4">19.0</span><span class="s0">,</span>
                        <span class="s0">color: Colors.white,</span>
                      <span class="s0">),),</span>
                    <span class="s0">onTap: ()</span>
                    <span class="s0">{</span>
                      <span class="s0">Navigator.push(context, MaterialPageRoute(builder: (context){</span>
                        <span class="s3">//return SearchPage();</span>
                        <span class="s2">return </span><span class="s0">MyApp1();</span>
                      <span class="s0">}));</span>
                    <span class="s0">},</span>

                  <span class="s0">),</span>
                <span class="s0">),</span>

              <span class="s0">],</span>
            <span class="s0">),</span>
          <span class="s0">),</span>
        <span class="s0">),</span>
      <span class="s0">),</span>
    <span class="s0">);</span>
  <span class="s0">}</span>
<span class="s0">}</span>

<span class="s2">class </span><span class="s0">MyDrawer1 </span><span class="s2">extends </span><span class="s0">StatelessWidget {</span>
  <span class="s0">@override</span>
  <span class="s0">Widget build(BuildContext context) {</span>
    <span class="s2">return </span><span class="s0">SizedBox(</span>
      <span class="s0">width: </span><span class="s4">300</span><span class="s0">,</span>
      <span class="s0">height: double.infinity,</span>
      <span class="s0">child: Material(</span>
        <span class="s0">color: Colors.deepOrangeAccent[</span><span class="s4">100</span><span class="s0">],</span>
        <span class="s0">child: SafeArea(</span>
          <span class="s0">child: Theme(</span>
            <span class="s0">data: ThemeData(brightness: Brightness.dark),</span>
            <span class="s0">child: Column(</span>
              <span class="s0">crossAxisAlignment: CrossAxisAlignment.start,</span>
              <span class="s0">mainAxisSize: MainAxisSize.max,</span>
              <span class="s0">children: [</span>
                <span class="s0">SizedBox(</span>
                  <span class="s0">height: MediaQuery.of(context).size.height/</span><span class="s4">5</span><span class="s0">,</span>
                <span class="s0">),</span>
                <span class="s0">SizedBox(</span>
                  <span class="s0">height: MediaQuery.of(context).size.height/</span><span class="s4">9</span><span class="s0">,</span>
                  <span class="s0">child:</span>
                  <span class="s0">ListTile(</span>
                    <span class="s0">leading: Icon(Icons.forward),</span>
                    <span class="s0">title: Text(</span><span class="s1">'Self-Study'</span><span class="s0">,</span>
                      <span class="s0">style: TextStyle(</span>
                        <span class="s0">fontSize: </span><span class="s4">19.0</span><span class="s0">,</span>
                        <span class="s0">color: Colors.white,</span>
                      <span class="s0">),),</span>
                    <span class="s0">onTap: ()</span>
                    <span class="s0">{</span>
                      <span class="s0">Navigator.push(context, MaterialPageRoute(builder: (context){</span>
                        <span class="s3">//return SearchPage();</span>
                        <span class="s2">return </span><span class="s0">MyApp1();</span>
                      <span class="s0">}));</span>
                    <span class="s0">},</span>

                  <span class="s0">),</span>
                <span class="s0">),</span>
                <span class="s0">SizedBox(</span>
                  <span class="s0">height: MediaQuery.of(context).size.height/</span><span class="s4">9</span><span class="s0">,</span>
                  <span class="s0">child:</span>
                  <span class="s0">ListTile(</span>
                    <span class="s0">leading: Icon(Icons.forward),</span>
                    <span class="s0">title: Text(</span><span class="s1">'Office'</span><span class="s0">,</span>
                      <span class="s0">style: TextStyle(</span>
                        <span class="s0">fontSize: </span><span class="s4">19.0</span><span class="s0">,</span>
                        <span class="s0">color: Colors.white,</span>
                      <span class="s0">),),</span>
                    <span class="s0">onTap: ()</span>
                    <span class="s0">{</span>
                      <span class="s0">Navigator.push(context, MaterialPageRoute(builder: (context){</span>
                        <span class="s3">//return SearchPage();</span>
                        <span class="s2">return </span><span class="s0">MyApp1();</span>
                      <span class="s0">}));</span>
                    <span class="s0">},</span>

                  <span class="s0">),</span>
                <span class="s0">),</span>
                <span class="s0">SizedBox(</span>
                  <span class="s0">height: MediaQuery.of(context).size.height/</span><span class="s4">9</span><span class="s0">,</span>
                  <span class="s0">child:</span>
                  <span class="s0">ListTile(</span>
                    <span class="s0">leading: Icon(Icons.forward),</span>
                    <span class="s0">title: Text(</span><span class="s1">'Laboratory'</span><span class="s0">,</span>
                      <span class="s0">style: TextStyle(</span>
                        <span class="s0">fontSize: </span><span class="s4">19.0</span><span class="s0">,</span>
                        <span class="s0">color: Colors.white,</span>
                      <span class="s0">),),</span>
                    <span class="s0">onTap: ()</span>
                    <span class="s0">{</span>
                      <span class="s0">Navigator.push(context, MaterialPageRoute(builder: (context){</span>
                        <span class="s3">//return SearchPage();</span>
                        <span class="s2">return </span><span class="s0">MyApp1();</span>
                      <span class="s0">}));</span>
                    <span class="s0">},</span>

                  <span class="s0">),</span>
                <span class="s0">),</span>

                <span class="s0">SizedBox(</span>
                  <span class="s0">height: MediaQuery.of(context).size.height/</span><span class="s4">9</span><span class="s0">,</span>
                  <span class="s0">child: ListTile(</span>
                    <span class="s0">leading: Icon(Icons.forward),</span>
                    <span class="s0">title: Text(</span><span class="s1">'Classroom'</span><span class="s0">,</span>
                      <span class="s0">style: TextStyle(</span>
                        <span class="s0">fontSize: </span><span class="s4">19.0</span><span class="s0">,</span>
                        <span class="s0">color: Colors.white,</span>
                      <span class="s0">),),</span>
                    <span class="s0">onTap: ()</span>
                    <span class="s0">{</span>
                      <span class="s0">Navigator.push(context, MaterialPageRoute(builder: (context){</span>
                        <span class="s3">//return SearchPage();</span>
                        <span class="s2">return </span><span class="s0">GalleryPage();</span>
                      <span class="s0">}));</span>
                    <span class="s0">},</span>

                  <span class="s0">),</span>
                <span class="s0">),</span>

              <span class="s0">],</span>
            <span class="s0">),</span>
          <span class="s0">),</span>
        <span class="s0">),</span>
      <span class="s0">),</span>
    <span class="s0">);</span>
  <span class="s0">}</span>
<span class="s0">}</span></pre>
</body>
</html>